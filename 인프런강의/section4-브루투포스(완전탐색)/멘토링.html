<!DOCTYPE html>
<html lang="ko-KR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>멘토링</title>
</head>

<body>
    <script>
        function solution(test) {
            // let answer = 0;
            // let n = arr[0].length; // n명의 학생
            // let m = arr.length; // m 번의 test
            // let data = new Map();
            // let count = 0;
            // for (let i = 0; i < n - 1; i++) {
            //     for (let j = i + 1; j < n; j++) {
            //         for (x of arr) {
            //             let aIndex = x.indexOf(i + 1);
            //             let bIndex = x.indexOf(j + 1);

            //             let winner = aIndex < bIndex ? i + 1 : j + 1;
            //             if (!data.get(`${i + 1},${j + 1}`)) {
            //                 data.set(`${i + 1},${j + 1}`, new Set([winner]))
            //             }
            //             else {
            //                 data.set(`${i + 1},${j + 1}`, new Set([...data.get(`${i + 1},${j + 1}`), winner]))
            //             }
            //         }
            //     }
            // }

            // for (x of data.values()) {
            //     if (x.size === 1) { answer++ }
            // }


            // let n = arr[0].length; // n명의 학생
            // let m = arr.length; // m 번의 test
            // let answer = 0;
            // for (let i = 0; i < n - 1; i++) {
            //     for (let j = i + 1; j < n; j++) {
            //         let count = 0;
            //         for (x of arr) {
            //             let aIndex = x.indexOf(i + 1);
            //             let bIndex = x.indexOf(j + 1);

            //             if (aIndex < bIndex) count++
            //         }
            //         if (count % m === 0) answer++
            //     }
            // }

            // return answer;

            let answer = 0;
            m = test.length;
            n = test[0].length;
            for (let i = 1; i <= n; i++) {
                for (let j = 1; j <= n; j++) {
                    let cnt = 0;
                    for (let k = 0; k < m; k++) {
                        let pi = pj = 0;
                        for (let s = 0; s < n; s++) {
                            if (test[k][s] === i) pi = s;
                            if (test[k][s] === j) pj = s;
                        }
                        if (pi < pj) cnt++;
                    }
                    if (cnt === m) answer++;
                }
            }
            return answer;

        }

        let arr = [[3, 4, 1, 2], [4, 3, 2, 1], [3, 1, 4, 2]];
        console.log(solution(arr));
    </script>
</body>

</html>